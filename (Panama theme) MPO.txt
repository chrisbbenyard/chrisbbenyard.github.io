<!----- 
Multiple Product Options for Big Cartel
Author: Theme Fiend
Theme: Dominion
----->
<div><section class="scripts-and-styles-mpo">
{% assign: License_Key = "XXXX-XXXX-XXXX-XXXX" %} {{ Note: Replace with the License Key you received from your purchase }}
{% assign: First_Option_Group_Name = "Color" %}
{% assign: Second_Option_Group_Name = "Size" %}
{% assign: First_Option_Group_Type = "Tabs" %} {{ Options: "Tabs" or "Dropdown" }}
{% assign: Option_Name_Seperator = " / " %}
{% assign: Remove_Text = "Remove" %}

<script>
optGroups = [
	{
      option_name: "Example Color 1",
      swatch: "#cccccc",
      product_slug: "example-product",
	},	
	{
      option_name: "Example Color 2",
      swatch: "#000000", 
      product_slug: "example-product",
	},		
]
</script>
<!----- DO NOT EDIT CODE BELOW!! ----->
{% assign: Products_Grid_Zone = "#products, .related_products" %}{% assign: Cart_Zone = "form#cart-form tbody" %}{% assign: Image_Gallery_Zone = "#product_images" %}{% assign: Product_Form_Zone = "form[action*=cart]:first" %}{% assign: Products_per_Row = 3 %}{% assign: ppr = Products_per_Row %}   
<script data-theme="Dominion" id="product_images_template" type="text/html"><% for(var x = 0; x < products.length; x++){ %> <% if (products[x].id == "{{ product.id }}") { %><div class="product-image-gallery"><li class="featured" <% if (products[x].images.length< 2) { %>style="width:100%" <% } %>> <% for(var z = 0; z < 1; z++){ %> <a href="<%= products[x].images[z] %>"> <% if (products[x].status == "sold-out"){ %><div id="sold"><span class="soldout">Sold Out</span></div><% } %> <% if (products[x].status == "coming-soon"){ %><div id="coming-soon"><span class="soon">Coming Soon</span></div> <% } %> <% if (products[x].status == "active"){ %> <% if (products[x].onSale == "true"){ %><div id="sale"><span class="onsale">On Sale</span></div><% } %> <% } %><img src="<%= products[x].images[z] %>" alt="Image of <%= products[x].title %>" /></a> <% } %></li> <% if (products[x].images.length > 1) { %><ul id="product_thumbnails" class="product-gallery"> <% for(var z = 0; z < products[x].images.length; z++){ %><li class="thumbnail"><a href="<%= products[x].images[z] %>" onclick="return false;"><img src="<%= products[x].images[z] %>" alt="Image of <%= products[x].title %>" /></a></li> <% } %></ul> <% } %></div> <% } %> <% } %></script>
<script data-theme="Dominion" id="multiple_product_options_template" type="text/html"><% for(var x = 0; x < products.length; x++){ %> <% if (products[x].id == current_product_id) { %><% if (selection_type == "Dropdown") { %><style type="text/css">.selector{margin-bottom:0px}.option-title {font-weight: 500;margin-bottom: 0px;}</style><% } %><div class="selector"><div class="option-title">{{ First_Option_Group_Name }}</div><% var uniqueNames = []; %><div class="parent-options option-group" data-product-slug="{{ product.url | remove: '/product/' }}"> <% if (selection_type == "Dropdown") { %><div class="select options"> <select name="cart[add][id]" data-name="{{ First_Option_Group_Name | lowercase }}"><option disabled="disabled" selected="selected">Choose {{ First_Option_Group_Name | lowercase }}</option> <% for(var a = 0; a < products[x].product_options.length; a++){ %> <% if(uniqueNames.indexOf(products[x].product_options[a].title) === -1){ %><option data-title="<%=products[x].product_options[a].tag %>" data-product-image="" data-index="<%= uniqueNames.push(products[x].product_options[a].title)%>" id="<%=products[x].product_options[a].value %>" value="<% if (products[x].product_options[a].relationship == "parent") { %><%=products[x].product_options[a].value %><% } else { %><%=products[x].product_options[a].option_id %><% } %>"><%=products[x].product_options[a].title %></option> <% } %> <% } %><% for ( var a = 0; a < products[x].product_options.length; a++ ) { %> <% if(uniqueNames.indexOf(products[x].product_options[a].title) === -1){ %> <%= uniqueNames[a] %> <% } %> <% } %> </select></div> <% } else { %><% for(var a = 0; a < products[x].product_options.length; a++){ %> <% if(uniqueNames.indexOf(products[x].product_options[a].title) === -1){ %><li data-index="<%= uniqueNames.push(products[x].product_options[a].title)%>"><input data-title="<%=products[x].product_options[a].tag %>" type="radio" id="<%=products[x].product_options[a].value %>" name="<% if (products[x].product_options[a].relationship == "parent") { %>parent_option<% } else { %>cart[add][id]<% } %>" value="<% if (products[x].product_options[a].relationship == "parent") { %><%=products[x].product_options[a].value %><% } else { %><%=products[x].product_options[a].option_id %><% } %>"><label data-swatch="<%=products[x].product_options[a].title %>" for="<%=products[x].product_options[a].value %>"><span data-swatch="<%=products[x].product_options[a].title %>" class="color-swatch"></span><span><%=products[x].product_options[a].title %></span></label></li> <% } %> <% } %><% for ( var a = 0; a < products[x].product_options.length; a++ ) { %> <% if(uniqueNames.indexOf(products[x].product_options[a].title) === -1){ %> <%= uniqueNames[a] %> <% } %> <% } %></ul> <% } %></div></div> <% if (products[x].product_options[0].original_title.indexOf(" / ") > -1) { %><div class="select sub-options options"> <label>{{ Second_Option_Group_Name | lowercase }}</label> <select name="cart[add][id]"><option disabled="disabled" selected="selected">Choose {{ Second_Option_Group_Name | lowercase }}</option></select></div> <% } %> <% } %> <% } %>	</script>
<div id="color_swatch_styles"></div>
<script id="color_swatch_styles_template" type="text/html"><style class="stylesheet" type="text/css">.page-loader{opacity: .75}.extra-image+a[href*=product_images]{display:none}.fadeIn{min-height:250px;transition:.5s ease all;transition-delay: .5s}<% for ( var a = 0;a < optGroups.length;a++ ){ %> <% if (optGroups[a].product_slug){ %>.parent-options[data-product-slug="<%=optGroups[a].product_slug%>"]<% }%>.color-swatch[data-swatch="<%=optGroups[a].option_name%>"]{<% if (optGroups[a].swatch.indexOf("#")>-1){ %>background-color:<%=optGroups[a].swatch %><% }%> <% if (optGroups[a].swatch.indexOf(".")>-1){ %>background-image:url(<%=optGroups[a].swatch %>);<% }%>}<% }%></style></script>
<div id="color_swatch_styles"></div>
<script data-theme="Dominion" id="new_products_grid_template" type="text/html">{%if page.full_url contains'/products'%}<%for(var x=0;x<products.length;x++){ %>{%else%}<%for(var x=0;x<products.length;x++){ %>{%endif%}{%if page.full_url contains'/product/'%}<%for(var y=0;y<products[x].categories.length;y++){ %><%if(products[x].categories[y].value=="{% for category in product.categories limit: 1 %}{{ category.permalink }}{% endfor %}"){ %>{%endif%}<div id="product-<%= products[x].index %>"class="product <% if (products[x].status == "sold-out"){ %>sold<% } else if(products[x].status == "coming-soon"){ %>soon<% } else if (products[x].status == "active" && products[x].onSale == "true"){ %>sale<% } %> <% if (products[x].ppr == "2" && (x+1) % 2 === 0) { %>last<% } else if(products[x].ppr == "3" && (x+1) % 3 === 0) { %>last<% } else if(products[x].ppr == "4" && (x+1) % 4 === 0) { %>last<% } else if(products[x].ppr == "5" && (x+1) % 5 === 0) { %>last<% } %>"><a href="<%= products[x].url %>"title="View <%= products[x].title %>"class="product-a"><%if(products[x].status=="sold-out"){ %><div id="sold"><span class="soldout">Sold Out</span></div><% }%><%if(products[x].status=="coming-soon"){ %><div id="coming-soon"><span class="soon">Coming Soon</span></div><% }%><%if(products[x].status=="active"){ %><%if(products[x].onSale=="true"){ %><div id="sale"><span class="onsale">On Sale</span></div><% }%><% }%><%for(var z=0;z<products[x].images.length;z++){ %><img data-slug="<%= products[x].url.replace("/product/", "") %>" data-image="<%= products[x].images[z] %>" class="product-img"src="<%= products[x].images[z] %>"alt="Image of <%= products[x].title %>"/><% }%><span class="stilt"></span><div class="product-info"><h3 class="product-title"><span><%=products[x].title%></span></h3><p class="product-price"><%if(products[x].defaultPriceVal<products[x].maxPriceVal&&products[x].onSale=="true"){ %><del><%=products[x].maxPrice%></del><% }%><span><%=products[x].defaultPrice%></span></p></div></a><div class="product_options_list parent-options"data-product-slug="<%= products[x].url.replace("/product/", "") %>"><div class="pol-inner"><%var uniqueNames=[];%><%for(var a=0;a<products[x].product_options.length;a++){ %><%if(uniqueNames.indexOf(products[x].product_options[a].title)===-1){ %><li data-index="<%= uniqueNames.push(products[x].product_options[a].title) %>"><input data-title="<%= products[x].product_options[a].tag %>"type="radio"id="<%= products[x].product_options[a].value %>"name="first_group"value="<%= products[x].product_options[a].value %>"><label data-slug="<%= products[x].url.replace("/product/", "") %>"data-tag="<%= products[x].product_options[a].tag %>"for="<%= products[x].product_options[a].value %>"><a href="<%= products[x].url %>?<%= first_option_group_name.toLowerCase() %>=<%= products[x].product_options[a].title.replace(" ", "%20").replace("/", "-") %>"><span data-swatch="<%= products[x].product_options[a].title %>"class="color-swatch"></span><span class="label-text"><%=products[x].product_options[a].title%></span></a></label></li><% }%><% }%><%for(var a=0;a<products[x].product_options.length;a++){ %><%if(uniqueNames.indexOf(products[x].product_options[a].title)===-1){ %><%=uniqueNames[a]%><% }%><% }%></div></div></div><% }%>{%if page.full_url contains'/product/'%}<% }%><% }%>{%endif%}</script>
<script type="text/html" id="color_swatch_styles_template"><style class="stylesheet" type="text/css">.extra-image+a[href*=product_images]{display:none}.fadeIn{min-height:250px;transition:.5s ease all;transition-delay: .5s}<% for ( var a = 0;a < optGroups.length;a++ ){ %> <% if (optGroups[a].product_slug){ %>.parent-options[data-product-slug="<%=optGroups[a].product_slug%>"]<% }%>.color-swatch[data-swatch="<%=optGroups[a].option_name%>"]{<% if (optGroups[a].swatch.indexOf("#")>-1){ %>background-color:<%=optGroups[a].swatch %><% }%> <% if (optGroups[a].swatch.indexOf(".")>-1){ %>background-image:url(<%=optGroups[a].swatch %>);<% }%>}<% }%></style></script>	
<script data-theme="Dominion" id="new_cart_template" type="text/html"><%for(var x=0;x<items.length;x++){ %><tr id="item-<%= items[x].id %>"data-product-id="<%= items[x].id %>"><td class="item_image item-img"><a href="<%= items[x].url %>"><img class="current-image image"src="<%= items[x].images[0] %>"style="width:80px"></a><div class="item_images"><%for(var z=0;z<items[x].images.length;z++){ %><img src="<%= items[x].images[z] %>"alt=""><% }%></div></td><td class="item-name"><a href="<%= items[x].url %>"><span class="item-title"><%=items[x].title%></span><span class="item-option"><%=items[x].current_option%></span></a><div class="swatch-options"><%var uniqueNames=[];%><%for(var a=0;a<items[x].product_options.length;a++){ %><%if(uniqueNames.indexOf(items[x].product_options[a].title)===-1){ %><li data-index="<%= uniqueNames.push(items[x].product_options[a].title) %>"><input data-title="<%= items[x].product_options[a].tag %>"type="radio"id="<%= items[x].product_options[a].value %>"value="<%= items[x].product_options[a].value %>"><label data-item-url="<%= items[x].url %>"data-slug="<%= items[x].url.replace("/product/", "") %>"data-title="<%= items[x].product_options[a].tag %>"data-tag="<%= items[x].product_options[a].tag %>"for="<%= items[x].product_options[a].value %>"><span data-swatch="<%= items[x].product_options[a].title %>"class="color-swatch"></span><span class="label-text"><%=items[x].product_options[a].title%></span></label></li><% }%><% }%><%for(var a=0;a<items[x].product_options.length;a++){ %><%if(uniqueNames.indexOf(items[x].product_options[a].title)===-1){ %><%=uniqueNames[a]%><% }%><% }%></div></td><td class="item-price"><%=items[x].unit_price%></td><td class="item-qty"><div id="item-quantity"><ul class="qty-cont"><input autocomplete="off"id="item_<%= items[x].id %>_qty"name="cart[update][<%= items[x].id %>]"type="text"value="<%= items[x].quantity %>"></ul></div><div id="remove-btn-phone"class="visible-phone"><a href="#"class="remove-btn"title="Remove item"><span>{{Remove_Text}}</span></a></div></td><td class="item-total"><%=items[x].total_price%></td><td class="item-remove hidden-phone"><a href="#"class="remove-btn"title="Remove item"><span>{{Remove_Text}}</span></a></td></tr><% }%></script>	
<link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/themefiend/multiple-product-options/mpo_styles.css"> <script type="text/javascript" data-script="mpo" src="https://s3.amazonaws.com/themefiend/multiple-product-options/mpo_script.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-zoom/1.7.20/jquery.zoom.min.js"></script>
<script type="text/javascript">var splitter = "<%";
!function(){var t={};this.tmpl=function n(p,i){var e=/\W/.test(p)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+p.replace(/[\r\t\n]/g," ").split(splitter).join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[p]=t[p]||n(document.getElementById(p).innerHTML);return i?e(i):e}}();	
{% if page.full_url contains '/product/' %}var productData = { "selection_type": "{{ First_Option_Group_Type }}", "first_option_group_name": "{{ First_Option_Group_Name }}", "current_product_id": "{{ product.id }}", "products": [ { "title": "{{ product.name }}", "id": "{{ product.id }}", "images": [{% for image in product.images %}"{{ image | product_image_url | constrain: '900'}}",{% endfor %}], "url": "{{ product.url }}", "maxPrice": "{{ product.max_price | money_with_sign | strip_html }}", "defaultPrice": "{{ product.default_price | money_with_sign | strip_html }}", "maxPriceVal": {{ product.max_price }}, "defaultPriceVal": {{ product.default_price }}, "status": "{{ product.status }}", "onSale": "{{ product.on_sale }}", "index": "{{ forloop.index }}", "ppr": "{{ ppr }}", "creationDate": "{{ product.created_at | date: '%m-%d-%y' }}", "categories":[{% for category in product.categories %}{"value": "{{ category.permalink }}"},{% endfor %}], "product_options":[ {% for option in product.options %} {% assign: variant_option = option.name | split: Option_Name_Seperator %} {% capture optionName %}{{ variant_option[0] }} / {{ variant_option[1] }}{% endcapture %} {"title": "{{ variant_option[0] }}", "original_title": "{{ option.name }}", "option_id": "{{ option.id }}", "product_id": "{{ product.id }}", "stock_quantity": "{% if option.quantity == 0 %}sold-out{% else %}{{ option.quantity }}{% endif %}", "stock_status": "{% if option.quantity == 0 %}sold-out{% else %}in-stock{% endif %}", "tag": "{{ variant_option[0] | replace: ' ', '+' | replace: '/', '-' }}", "relationship": {% if option.name contains Option_Name_Seperator %}"parent"{% else %}null{% endif %}, "value": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "options": [ {% for option in product.options %}{% if option.name == optionName %}{"title": "{{ option.name | remove: variant_option[0] | remove: Option_Name_Seperator }}", "stock_quantity": "{{ option.quantity }}", "id": "{{ option.id }}", "product_id": "{{ product.id }}", "parent": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "price":"{{ option.price | money: 'sign' | strip_html }}", "stock_status":"{% if option.quantity == 0 %}sold-out{% else %}in-stock{% endif %}"},{% endif %}{% endfor %} ]}, {% endfor %} ] }, ] };(function($) { if ($('span[data-swatch]').css('background-color') != 'rgba(0, 0, 0, 0)' && $('span[data-swatch]').css('background-image') != 'none') { var swatchStyles = document.getElementById("color_swatch_styles"); swatchStyles.innerHTML = tmpl("color_swatch_styles_template", optGroups); } var imageGallery = document.querySelector('{{ Image_Gallery_Zone }}'); imageGallery.innerHTML = tmpl('product_images_template', productData); $("{{ Product_Form_Zone }}").prepend("<div id='multiple_product_options' data-mpo-id='{{ product.id }}_id'>" + tmpl('multiple_product_options_template', productData) + "</div>"); $(document).ready(function() { $('.relpro_inner').find("div.product").slice({{ ppr }},{{ ppr | plus: 1}}).remove(); var currentImage = $(".featured img").attr("src"); $('.featured').zoom({url: currentImage}); for ( var a = 0; a < optGroups.length; a++ ) {$("#multiple_product_options:first span.color-swatch:not([data-product-image])").on('click', function(){ $(".product-image-gallery:first .featured .extra-image, .extra-image-gallery").remove(); });if (optGroups[a].product_image) { $('span[data-swatch="' + optGroups[a].option_name + '"], input[data-title="' + optGroups[a].option_name + '"], option[data-title="' + optGroups[a].option_name + '"]').attr('data-product-image', optGroups[a].product_image.replace(',','')); }$('#multiple_product_options:first [data-product-slug="' + optGroups[a].product_slug + '"] span[data-product-image][data-swatch="' + optGroups[a].option_name + '"]').on("click", function() { var prodImg = $(this).attr('data-product-image'); $(".product-image-gallery:first .featured:not(:has(.extra-image))").prepend('<div class="extra-image"></div>'); $(".product-image-gallery:first .featured .extra-image").html('<a class="fadeIn cboxElement" href="' + prodImg + '"><img src="' + prodImg + '"></a>'); }); } }); $('span[data-swatch]').each(function() { if ($(this).css('background-color') == 'rgba(0, 0, 0, 0)' && $(this).css('background-image') == 'none') { $(this).remove(); } }); })(jQuery);{% endif %}
var cartData = { "first_option_group_name": "{{ First_Option_Group_Name }}", "items": [ {% for item in cart.items %} { "title": "{{ item.product.name }}", "id": "{{ item.id }}", "images": [{% for image in item.product.images %}"{{ image | product_image_url | constrain: '900'}}",{% endfor %}], "url": "{{ item.product.url }}", "unit_price": "{{ item.unit_price | money_with_sign | strip_html }}", "quantity": "{{ item.quantity }}", "total_price": "{{ item.price | money_with_sign | strip_html }}", "stock_status": "{{ item.product.status }}", "onSale": "{{ item.product.on_sale }}", "index": "{{ forloop.index }}", "current_option": "{{ item.option.name }}", "product_options":[ {% for option in item.product.options %} {% assign: variant_option = item.option.name | split: ' / ' %} {% capture optionName %}{{ variant_option[0] }} / {{ variant_option[1] }}{% endcapture %} {"title": "{{ variant_option[0] }}", "tag": "{{ variant_option[0] | replace: ' ', '+' | replace: '/', '-' }}", "relationship": {% if item.option.name contains ' / ' %}"parent"{% else %}null{% endif %}, "value": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "options": [ {% if item.option.name == optionName %}{"title": "{{ item.option.name | remove: variant_option[0] | remove: ' / ' }}", "id": "{{ item.option.id }}", "parent": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "price":"{{ item.option.price | money: 'sign' | strip_html }}"},{% endif %} ]}, {% endfor %} ] }, {% endfor %} ] }; var swatchStyles = document.getElementById("color_swatch_styles"); swatchStyles.innerHTML = tmpl("color_swatch_styles_template", optGroups);(function($) { var cartLoop = $('{{ Cart_Zone }}'); cartLoop.html(tmpl('new_cart_template', cartData)); $(".swatch-options label[data-title]").each(function(){ $(this).click(function(){ var selectedOption = $(this).attr("data-title"); var productId = $(this).parents("tr").attr("data-product-id"); var productUrl = $(this).attr("data-item-url"); $("tr[data-product-id=" + productId + "] .item_images img[src*='_" + selectedOption + "_']:first").each(function() { var currentOptionImage = $(this).attr('src'); $("tr[data-product-id=" + productId + "] .current-image").attr('src', currentOptionImage).parents("a").attr("href", productUrl + "?" + cartData.first_option_group_name.toLowerCase() + "=" + selectedOption.replace("+", "%20")); }); }); }); $(document).ready(function() { $("a.remove-btn").click(function() { var product_id = $(this).attr('data-product-id'); Cart.removeItem(product_id, function(cart) { $("button.update_btn").trigger('click'); }); }); $("#choose-country select").on('change', function() { $("button.update_btn").trigger('click'); }); $(".swatch-options label[data-title]").trigger("click");}); $('span[data-swatch]').each(function() { if ($(this).css('background-color') == 'rgba(0, 0, 0, 0)' && $(this).css('background-image') == 'none') { $(this).remove(); } }); })(jQuery);
</script><div id="color_swatch_styles"></div>
<script id="color_swatch_styles_template" type="text/html"><style class="stylesheet" type="text/css">.extra-image+a[href*=product_images]{display:none}.fadeIn{min-height:250px;transition:.5s ease all;transition-delay: .5s}<% for ( var a = 0;a < optGroups.length;a++ ){ %> <% if (optGroups[a].product_slug){ %>.parent-options[data-product-slug="<%=optGroups[a].product_slug%>"]<% }%>.color-swatch[data-swatch="<%=optGroups[a].option_name%>"]{<% if (optGroups[a].swatch.indexOf("#")>-1){ %>background-color:<%=optGroups[a].swatch %><% }%> <% if (optGroups[a].swatch.indexOf(".")>-1){ %>background-image:url(<%=optGroups[a].swatch %>);<% }%>}<% }%></style></script>
</section></div>{% unless page.full_url contains '/cart' %}<script>(function($) { var productGridData = { "selection_type": "{{ First_Option_Group_Type }}", "first_option_group_name": "{{ First_Option_Group_Name }}", {% if page.full_url contains "/product/" %}"current_product_id": "{{ product.id }}",{% endif %} "products": [ {% if page.full_url contains '/product/' %} {% for product in products.all %} {% unless product.id == currentProduct %} { "title": "{{ product.name }}", "images": [{% for image in product.images %}"{{ image | product_image_url | constrain: '900'}}",{% endfor %}], "url": "{{ product.url }}", "maxPrice": "{{ product.max_price | money_with_sign | strip_html }}", "defaultPrice": "{{ product.default_price | money_with_sign | strip_html }}", "maxPriceVal": {{ product.max_price | money }}, "defaultPriceVal": {{ product.default_price | money }}, "status": "{{ product.status }}", "onSale": "{{ product.on_sale }}", "index": "{{ forloop.index }}", "ppr": "{{ ppr }}", "creationDate": "{{ product.created_at | date: '%m-%d-%y' }}", "categories":[{% for category in product.categories %}{"value": "{{ category.permalink }}"},{% endfor %}], "product_options":[ {% for option in product.options %} {% assign: variant_option = option.name | split: Option_Name_Seperator %} {% capture optionName %}{{ variant_option[0] }} / {{ variant_option[1] }}{% endcapture %} {"title": "{{ variant_option[0] }}", "tag": "{{ variant_option[0] | replace: ' ', '+' | replace: '/', '-' }}", "relationship": {% if option.name contains Option_Name_Seperator %}"parent"{% else %}null{% endif %}, "value": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "options": [ {% for option in product.options %}{% if option.name == optionName %}{"title": "{{ option.name | remove: variant_option[0] | remove: Option_Name_Seperator }}", "id": "{{ option.id }}", "parent": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "price":"{{ option.price | money: 'sign' | strip_html }}", "status":"{% if option.quantity == 0 %}sold-out{% else %}in-stock{% endif %}"},{% endif %}{% endfor %} ]}, {% endfor %} ] }, {% endunless %} {% endfor %} {% endif %} {% if page.full_url contains '/products' or page.full_url contains '/category' or page.permalink == 'home' %} {% for product in products.current %} { "title": "{{ product.name }}", "images": [{% for image in product.images %}"{{ image | product_image_url | constrain: '900'}}",{% endfor %}], "url": "{{ product.url }}", "maxPrice": "{{ product.max_price | money_with_sign | strip_html }}", "defaultPrice": "{{ product.default_price | money_with_sign | strip_html }}", "maxPriceVal": {{ product.max_price | money }}, "defaultPriceVal": {{ product.default_price | money }}, "status": "{{ product.status }}", "onSale": "{{ product.on_sale }}", "index": "{{ forloop.index }}", "ppr": "{{ ppr }}", "creationDate": "{{ product.created_at | date: '%m-%d-%y' }}", "categories":[{% for category in product.categories %}{"value": "{{ category.permalink }}"},{% endfor %}], "product_options":[ {% for option in product.options %} {% assign: variant_option = option.name | split: Option_Name_Seperator %} {% capture optionName %}{{ variant_option[0] }} / {{ variant_option[1] }}{% endcapture %} {"title": "{{ variant_option[0] }}", "tag": "{{ variant_option[0] | replace: ' ', '+' | replace: '/', '-' }}", "relationship": {% if option.name contains Option_Name_Seperator %}"parent"{% else %}null{% endif %}, "value": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "options": [ {% for option in product.options %}{% if option.name == optionName %}{"title": "{{ option.name | remove: variant_option[0] | remove: Option_Name_Seperator }}", "id": "{{ option.id }}", "parent": "{{ variant_option[0] | downcase | escape | replace: ' ', '-'}}", "price":"{{ option.price | money: 'sign' | strip_html }}", "status":"{% if option.quantity == 0 %}sold-out{% else %}in-stock{% endif %}"},{% endif %}{% endfor %} ]}, {% endfor %} ] }, {% endfor %} {% endif %} ] }; var swatchStyles = document.getElementById("color_swatch_styles"); swatchStyles.innerHTML = tmpl("color_swatch_styles_template", optGroups);  $(document).ready(function() { $(".pol-inner:not(:has(span[data-swatch]))").remove(); }); $('span[data-swatch]').each(function() { if ($(this).css('background-color') == 'rgba(0, 0, 0, 0)' && $(this).css('background-image') == 'none') { $(this).remove(); } }); var prodLoop = $('{{ Products_Grid_Zone }}'); prodLoop.html(tmpl('new_products_grid_template', productGridData)); })(jQuery);</script>{% endunless %}
<script type="text/javascript">var LicenseKey = "{{ License_Key }}"; var shopURL = "{{ store.url }}";</script>
<style type="text/css">@media only screen and (max-width: 767px){#product-content .flexslider{display:none !important}#product_images{width:100% !important;display: inline-block !important;}#product_thumbnails {display: block;width: 100%;text-align: left;margin-top: 10px}#product_thumbnails li {list-style: none;max-width: 20%;float:left}}.product-img:not(:first-of-type){display:none}.selector{display:inline-block;font-size:12px;margin-bottom:20px;text-transform:uppercase}.select.sub-options.options>label{text-transform:uppercase;font-size:12px;margin-bottom:0}div#product-options{display:none}.product_options_list {text-align: center;margin-top: 10px;display: inline-block;width: 100%}span.item-title {display: block}span.item-option {font-size: 80%}</style>